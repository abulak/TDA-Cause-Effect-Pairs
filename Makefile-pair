# ifndef PREFIX
# 	PREFIX = test
# endif
# PAIRS_DIR = ./pairs

PYTHON = $(shell which python3)

MULTIPROCESS_FILE := ../../large_pairs

MULTIPROCESS_PAIRS := $(shell cat $(MULTIPROCESS_FILE))

ifeq ($(filter $(PAIR), $(MULTIPROCESS_PAIRS)),)
    SCRIPT = ../../TDA.py
else
    SCRIPT = ../../pair-multiprocessing.py
endif

default: knn

allall: knn all

knn: diagrams_knn 

all: diagrams_all

scores_knn diagrams_knn: outliers_knn
	$(PYTHON) $(SCRIPT) "knn"

scores_all diagrams_all : outliers_all
	$(PYTHON) $(SCRIPT) "all"

outliers_knn: std_points
	$(PYTHON) ../../identify-outliers.py "knn"

outliers_all: std_points
	$(PYTHON) ../../identify-outliers.py "all"

std_points: 
	$(PYTHON) ../../points-sampler.py $(PAIR) $(SIZE)

print:
	@echo $(MULTIPAIRS)
	@echo $(PAIR)
	@echo $(SCRIPT)
	@echo $(filter $(PAIR), $(MULTIPAIRS))

.PHONY: clean

clean:
	rm -rf ./*
